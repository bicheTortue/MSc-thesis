% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Dummy Chapter:
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% The Introduction:
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fancychapter{The design}
\label{cap:design}

In this chapter, I'm going to describe the different design decisions taken during the study of the thesis.

The system will be working with a $V_{dd}$ of $1.8V$. Such a value was chosen because this is a low power system.

The way values are encoded in the analog system will be descibed here as it serves for the entire thesis.
In order for the system to support negative numbers we're going to use a $V_{cm}$ set to $\frac{V_{dd}}{2}$. That means that $V_{cm}=\frac{V_{dd}}{2}=0.9V$. This $V_{cm}$ will then describe a zero. A step of one was chosen to be $0.1V$ in the analog circuit.
\Cref{tab:valConv} shows the conversions from a real number to its voltage equivalent.

\begin{table}[H]
  \centering
  \begin{tabular}{|c|c|}
    \hline
    \rowcolor{gray}
    Real value & Voltage \\
    \hline
    $0$ & $0.9V$ \\
    \hline
    $1$ & $1.0V$ \\
    \hline
    $x$ & $V(x)=\frac{x}{10}+V_{cm}$\\
    \hline
    $real(v)=(v-0.9)\cdot 10$ & $v$\\
    \hline
  \end{tabular}
  \caption{Real/Voltage Conversion Table.}
  \label{tab:valConv}
\end{table}

Since the system cannot reach voltage outside of the operating range with the intended behavior, the voltage is then restricted to $V\in [0,1.8]$. This means that the range of real value that the systems can handle is $x\in [-9,9]$.

Any data inputed in the analog system should have been previously checked to make sure it stays in the range of accepted values.

In order to create a fully functional \ac{LSTM} or \ac{GRU} circuit, there are a few components that are required.

An analog activation function circuit to have an analog equivalent to the activation function necessary to the good behavior of \acp{LSTM} and \acp{GRU}.

A memory cell to allow to store the analog value from one time step to the next.

A circuit for the crossbar array, to have a more general circuit that can easily be adapted.

Other, less significant, components required for the circuits to work.

\input{design/activation.tex}
\input{design/memcell.tex}
\input{design/crossbar.tex}
\input{design/inverter.tex}
\input{design/models.tex}
\input{design/lstm.tex}
\input{design/gru.tex}
\input{design/genwei.tex}
\input{design/netlist.tex}
\input{design/wei2res.tex}
\input{design/dataset.tex}
\input{design/run.tex}
\cleardoublepage
